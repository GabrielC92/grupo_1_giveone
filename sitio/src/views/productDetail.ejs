<!DOCTYPE html>
<html lang="es">
<%- include('partials/head',) %>
<body class="detail">
    <%- include('partials/header') %>

    <main class="detalle">
            <div class="product">
                <div class="photo-description">
                    <section class="photo">
                        <img src="/images/products/<%= product.images[0].file %>" alt="<%= product.name %>">
                    </section>
                    <section class="descripcion">
 
                        <div class="precio">
                            <h2 class="name"><%= product.name %></h2>
                            <p class="description-detail"><%= product.description %></p>

                            <div class="color-precio">
                                <p class="color-select">Color</p>
                                <select name="" id="">
                                    <option>Unico</option>
                                </select>
                                <span class="price">$<%= product.price %></span>
                                
                            </div>
                            
                            <div class="favoritos-boton">
                                <select name="" id="">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                    <option>8</option>
                                    <option>9</option>
                                    <option>10</option>
                                </select>
                                <button type="submit">Agregar al carrito</button>
                                
                            </div> 
                        </div> 
                        <div class="compartir-producto">
                        <p class="texto-compartir">COMPARTIR</p>
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-instagram"></i>
                        <i class="fab fa-pinterest-p"></i>
                        </div>

                        
                    </div>
                
                </section>
            </div>
            
            <!-- Caja de comentarios -->
            <h3 class="comentarios-box" data-aos="fade-right">Comentarios</h3>
            <div class='comments' data-aos="fade-up" data-aos-duration="2000">
                <div class='loader'></div>
                <div class='inner'>
                  <div class='add-new'>
                    <input class='input your-name' placeholder='Nombre' type='text'>
                    <textarea rows="4" cols="50" class='input your-msg' placeholder='Escribí tu comentario'></textarea>
                    <button class='send-msg'>Comentar</button>
                  </div>
                </div>
              </div>
    






    </main>    
    <%- include('partials/footer') %>
    <%- include('partials/scripts') %>
    <script>
        var defaultAvatar = "../images/users/avatar_default.png";
var guestuserId = Math.floor(Math.random() * (150 - 10 + 1)) + 10;
var guestusername = "";

function stopLoader() {
  $(".loader").fadeOut("slow", function() {
    $(".comments .inner").fadeIn("slow");
  });
}

function likecountinc(pos) {
  var x = document.getElementById(`LikeSpan-${pos}`).innerHTML;
  document.getElementById(`LikeSpan-${pos}`).innerHTML = x * 1 + 1;  
}

function dislikecountinc(pos) {
  var x = document.getElementById(`DislikeSpan-${pos}`).innerHTML;
  document.getElementById(`DislikeSpan-${pos}`).innerHTML = x * 1 + 1;
}

$(function() {
  var allComments = [
    {
      userid: "1",
      name: "Claudia",
      avatar: "default",
      before: "Hace 5 minutos",
      message: "Hermoso articulo!"
    }
  ];

  var loaded = 0;

  $.each(allComments, function(i, val) {
    var comment = $('<div class="comment"></div>');
    var avatar = this.avatar == "default" ? defaultAvatar : this.avatar;
    $('<img class="avatar" alt="avatar" src="' + avatar + '" />').appendTo(
      comment
    );
    var contents = $('<div class="body"></div>');
    $(
      '<a href="./users/' +
        this.userid +
        '/" target="_blank">' +
        this.name +
        "</a>"
    ).appendTo(contents);
    $("<span> • " + this.before + "</span><br /><br />").appendTo(contents);
    $("<p>" + this.message + "</p>").appendTo(contents);
  
  contents.appendTo(comment);
    comment.appendTo(".comments .inner");
    loaded++;
  });

  if (loaded == allComments.length) stopLoader();

  $(".send-msg").click(function() {
    var name = $(".your-name").val();
    var msg = $(".your-msg").val();
    var comment = $('<div class="comment" style="display: none;"></div>');
    var contents = $('<div class="body"></div>');

    if ((name === "" && guestusername === "") || msg === "") return false;
    guestusername = guestusername === "" ? name : guestusername;
    $(".your-msg").val("");

    $(".your-name")
      .fadeOut()
      .remove();
    $(".your-msg").before(
      '<div class="input your-name dived">' + guestusername + "</div>"
    );

    $(
      '<img class="avatar" alt="avatar" src="' + defaultAvatar + '" />'
    ).appendTo(comment);
    $(
      '<a href="./users/' +
        guestuserId +
        '/" target="_blank">' +
        guestusername +
        "</a>"
    ).appendTo(contents);
    $("<span> • Right now</span><br /><br />").appendTo(contents);
    $("<p>" + msg + "</p>").appendTo(contents);
     
    console.log('aabbcc');
    contents.appendTo(comment);
    $(".add-new").after(comment);
    comment.fadeIn("slow");
  });
});
    </script>

    <script>
        
    </script>
</body>
</html>
